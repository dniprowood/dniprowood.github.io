<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Client authorization</title>
        <link rel="stylesheet" href="css/style.css">
        <script src="mySketch.js" type="text/javascript"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.2/p5.min.js" type="text/javascript"></script>
        <script src="https://s3.amazonaws.com/stitch-sdks/js/bundles/4.1.1/stitch.js"></script>
    </head>
    <body>
        <main>
          <script src="https://s3.amazonaws.com/stitch-sdks/js/bundles/4.1.1/stitch.js"></script>
<script>
  const client = stitch.Stitch.initializeDefaultAppClient('dniprowood-xpykq');

  const db = client.getServiceClient(stitch.RemoteMongoClient.factory, 'mongodb1').db('<users>');

  client.auth.loginWithCredential(new stitch.AnonymousCredential()).then(user =>
    db.collection('<users>').updateOne({owner_id: client.auth.user.id}, {$set:{number:42}}, {upsert:true})
  ).then(() =>
    db.collection('<users>').find({owner_id: client.auth.user.id}, { limit: 100}).asArray()
  ).then(docs => {
      console.log("Found docs", docs)
      console.log("[MongoDB Stitch] Connected to Stitch")
  }).catch(err => {
    console.error(err)
  });
</script>
Stitch.initializeDefaultAppClient("<dniprowood-xpykq>");
// Parse the URL query parameters
const url = window.location.search;
const params = new URLSearchParams(url);
const token = params.get('token');
const tokenId = params.get('tokenId');

// Confirm the user's email/password account
const emailPassClient = Stitch.defaultAppClient.auth
  .getProviderClient(UserPasswordAuthProviderClient.factory);

return emailPassClient.confirmUser(token, tokenId);

            <form class="form">
                <div class="form__cover"></div>
                <div class="form__loader">
                    <div class="spinner active">
                        <svg class="spinner__circular" viewbox="25 25 50 50">
                            <circle class="spinner__path" cx="50" cy="50" r="20" fill="none" stroke-width="6" stroke-miterlimit="10"></circle>
                        </svg>
                    </div>
                </div>
                <div class="form__content">
                    <h1>Authorization</h1>
                    <div class="styled-input">
                        <input type="text" class="styled-input__input" name="nickname">
                        <div class="styled-input__placeholder">
                            <span class="styled-input__placeholder-text">Username</span>
                        </div>
                        <div class="styled-input__circle"></div>
                    </div>
                    <div class="styled-input">
                        <input type="text" class="styled-input__input">
                        <div class="styled-input__placeholder">
                            <span class="styled-input__placeholder-text">Password</span>
                        </div>
                        <div class="styled-input__circle"></div>
                    </div>
                    <button type="button" class="styled-button">
                        <span class="styled-button__real-text-holder"> <span class="styled-button__real-text">Submit</span> <span class="styled-button__moving-block face"> <span class="styled-button__text-holder"> <span class="styled-button__text">Submit</span> </span> </span><span class="styled-button__moving-block back"> <span class="styled-button__text-holder"> <span class="styled-button__text">Submit</span> </span> </span> </span>
                    </button>
                </div>
            </form>
        </main>
        <script src="js/index.js"></script>
    </body>
</html>
